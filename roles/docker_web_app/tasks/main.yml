---
 - name: install Docker Engine
   shell: yum -y install docker

 - name: start Docker
   service:
     name: docker
     state: started
     enabled: yes

# - name: clean from containers
#   shell: docker rm -f "$(docker ps -aq)"

# - name: Access DocekrHub private repo
#  docker_login:
#     username: crussassin
#     password: "{{ dockerhub_pass }}"


 - name: Pull the image
   shell: docker pull crussassin/point_12:app
 
 - name: Run web application 
   docker_container:
     name: "app{{ item }}"
     image: crussassin/point_12:app
   #  ports:
    #   - "500{{ item }}:5000"
     recreate: yes
     hostname: "{{ item }}"
     networks:
       - name: network_app
   with_sequence: count=3
   
# - name: download docker image
#   shell: |
#    docker run -d -p 5001:5000 crussassin/point_12:app
#    docker run -d -p 5002:5000 crussassin/point_12:app
#    docker run -d -p 5003:5000 crussassin/point_12:app    
   
